# Exemple de carduri Lovelace pentru Alerte Nowcasting
# Copie Ã®n dashboard-ul tÄƒu Lovelace (UI sau YAML mode)

# Card 1: Card simplu pentru alerte active (Entity Card)
# MostreazÄƒ numÄƒrul de alerte active È™i detalii de bazÄƒ
type: entity
entity: sensor.alerta_nowcasting
name: Alerte Meteo Nowcasting
icon: mdi:weather-cloudy-alert
state_color: true

---

# Card 2: Card detaliat cu toate informaÈ›iile (Entities Card)
type: entities
title: ðŸŒ©ï¸ Alerte Meteo Nowcasting
entities:
  - entity: sensor.alerta_nowcasting
    name: Alerte active
    icon: mdi:weather-cloudy-alert
  - type: attribute
    entity: sensor.alerta_nowcasting
    attribute: configured_counties
    name: JudeÈ›e monitorizate
  - type: attribute
    entity: sensor.alerta_nowcasting
    attribute: alert_title
    name: Titlu alertÄƒ
  - type: attribute
    entity: sensor.alerta_nowcasting
    attribute: phenomena
    name: Fenomen
  - type: attribute
    entity: sensor.alerta_nowcasting
    attribute: severity
    name: Severitate
  - type: attribute
    entity: sensor.alerta_nowcasting
    attribute: counties
    name: JudeÈ›e afectate
  - type: attribute
    entity: sensor.alerta_nowcasting
    attribute: alert_start
    name: ÃŽnceput
  - type: attribute
    entity: sensor.alerta_nowcasting
    attribute: alert_end
    name: SfÃ¢rÈ™it
  - type: attribute
    entity: sensor.alerta_nowcasting
    attribute: last_update
    name: Actualizat la
state_color: true

---

# Card 3: Card Markdown cu formatare customizatÄƒ
type: markdown
title: ðŸŒ©ï¸ Alerta Meteo
content: >
  {% set alerts = state_attr('sensor.alerta_nowcasting', 'active_alerts') %}
  {% set configured = state_attr('sensor.alerta_nowcasting', 'configured_counties') %}
  
  {% if configured != 'toate' %}
  **ðŸ—ºï¸ Monitorizare:** {{ configured | join(', ') }}
  
  ---
  {% endif %}
  
  {% if alerts > 0 %}
    ## âš ï¸ {{ alerts }} alertÄƒ(e) activÄƒ(e)!
    
    **{{ state_attr('sensor.alerta_nowcasting', 'alert_title') }}**
    
    ðŸ“ **JudeÈ›e:** {{ state_attr('sensor.alerta_nowcasting', 'counties') | join(', ') }}
    
    ðŸŒªï¸ **Fenomen:** {{ state_attr('sensor.alerta_nowcasting', 'phenomena') }}
    
    ðŸš¨ **Severitate:** {{ state_attr('sensor.alerta_nowcasting', 'severity') | upper }}
    
    â° **ÃŽnceput:** {{ state_attr('sensor.alerta_nowcasting', 'alert_start') | as_timestamp | timestamp_custom('%d.%m.%Y %H:%M') }}
    
    â±ï¸ **SfÃ¢rÈ™it:** {{ state_attr('sensor.alerta_nowcasting', 'alert_end') | as_timestamp | timestamp_custom('%d.%m.%Y %H:%M') }}
    
    ---
    
    {{ state_attr('sensor.alerta_nowcasting', 'alert_description') }}
  {% else %}
    ## âœ… Nicio alertÄƒ activÄƒ
    
    Nu existÄƒ fenomene meteo periculoase Ã®n acest moment{% if configured != 'toate' %} pentru judeÈ›ele monitorizate{% endif %}.
    
    *Actualizat: {{ state_attr('sensor.alerta_nowcasting', 'last_update') | as_timestamp | timestamp_custom('%d.%m.%Y %H:%M') }}*
  {% endif %}

---

# Card 4: Card condiÈ›ionat - apare doar cÃ¢nd existÄƒ alerte (Conditional Card)
type: conditional
conditions:
  - condition: numeric_state
    entity: sensor.alerta_nowcasting
    above: 0
card:
  type: markdown
  content: >
    # ðŸš¨ ALERTÄ‚ METEO ACTIVÄ‚!
    
    ## {{ state_attr('sensor.alerta_nowcasting', 'alert_title') }}
    
    {{ state_attr('sensor.alerta_nowcasting', 'alert_description') }}
    
    **JudeÈ›e afectate:** {{ state_attr('sensor.alerta_nowcasting', 'counties') | join(', ') }}
  card_mod:
    style: |
      ha-card {
        background: rgba(255, 87, 34, 0.1);
        border: 2px solid #ff5722;
      }

---

# Card 5: Card cu grafic istoric (History Graph)
type: history-graph
title: Istoric Alerte Meteo
entities:
  - entity: sensor.alerta_nowcasting
hours_to_show: 48
refresh_interval: 300

---

# Card 6: Card cu buton pentru refresh manual (Button Card - necesitÄƒ card-mod)
type: button
name: ActualizeazÄƒ Alerte
icon: mdi:refresh
tap_action:
  action: call-service
  service: homeassistant.update_entity
  service_data:
    entity_id: sensor.alerta_nowcasting
show_state: true
entity: sensor.alerta_nowcasting

---

# Card 7: Card grid complet cu toate informaÈ›iile (Grid Card)
type: grid
columns: 2
square: false
cards:
  - type: gauge
    entity: sensor.alerta_nowcasting
    name: Alerte Active
    needle: true
    min: 0
    max: 5
    severity:
      green: 0
      yellow: 1
      red: 2
  
  - type: entity
    entity: sensor.alerta_nowcasting
    name: Status Alerte
    attribute: severity
    icon: mdi:alert-circle
  
  - type: entity
    entity: sensor.alerta_nowcasting
    attribute: phenomena
    name: Fenomen Meteo
    icon: mdi:weather-lightning
  
  - type: entity
    entity: sensor.alerta_nowcasting
    attribute: alert_end
    name: SfÃ¢rÈ™it AlertÄƒ
    icon: mdi:clock-end

---

# Card 8: Card cu notificÄƒri persistente (Alert Card - Custom card)
# NecesitÄƒ: https://github.com/thomasloven/lovelace-card-mod
type: custom:mod-card
style: |
  {% if states('sensor.alerta_nowcasting') | int > 0 %}
    ha-card {
      background: linear-gradient(135deg, #ff5722 0%, #ff9800 100%);
      color: white;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.8; }
    }
  {% endif %}
card:
  type: entities
  title: ðŸš¨ Centru Alerte Meteo
  entities:
    - sensor.alerta_nowcasting
    - type: attribute
      entity: sensor.alerta_nowcasting
      attribute: alert_title
      name: AlertÄƒ curentÄƒ
    - type: attribute
      entity: sensor.alerta_nowcasting
      attribute: counties
      name: JudeÈ›e

---

# Card 9: Mini Graph Card pentru trend (necesitÄƒ mini-graph-card)
# https://github.com/kalkih/mini-graph-card
type: custom:mini-graph-card
entities:
  - sensor.alerta_nowcasting
name: Trend Alerte Meteo
hours_to_show: 24
points_per_hour: 4
line_width: 2
font_size: 75
animate: true
show:
  state: true
  icon: true
color_thresholds:
  - value: 0
    color: "#4caf50"
  - value: 1
    color: "#ff9800"
  - value: 2
    color: "#f44336"
